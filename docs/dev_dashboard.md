# Smart Home Dashboard - PRD + RFC

> æœ¬æ–‡æ¡£æ˜¯äº§å“éœ€æ±‚æ–‡æ¡£ (PRD) å’ŒæŠ€æœ¯æ–¹æ¡ˆ (RFC) çš„åˆä½“ï¼Œå®šä¹‰ä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—åŠå…¶å®ç°æ–¹æ¡ˆã€‚

---

## ä¸€ã€äº§å“æ¦‚è¿°

### 1.1 ç›®æ ‡

æ„å»ºä¸€ä¸ªç»Ÿä¸€çš„ Smart Home æ§åˆ¶é¢æ¿ï¼Œæä¾›ï¼š
1. **è®¾å¤‡æ§åˆ¶**: å®æ—¶æŸ¥çœ‹å’Œæ§åˆ¶æ‰€æœ‰æ™ºèƒ½å®¶å±…è®¾å¤‡
2. **å®šæ—¶ä»»åŠ¡**: å¯è§†åŒ–å±•ç¤ºæ‰€æœ‰å®šæ—¶ä»»åŠ¡
3. **å†å²æ•°æ®**: è®°å½•å¹¶å¯è§†åŒ–è®¾å¤‡çŠ¶æ€å†å²

### 1.2 å·²é›†æˆè®¾å¤‡

| è®¾å¤‡ç±»å‹ | æ•°é‡ | API | å¤‡æ³¨ |
|---------|------|-----|------|
| Hue ç¯å…‰ | 1 ç› (Baby room) | æœ¬åœ° API (phue) | ä¸»è¦æ§åˆ¶ç›®æ ‡ |
| Wemo å¼€å…³ | 4 ä¸ª | SSDP + UPnP (pywemo) | Coffee, Veggie, Tree, Bedroom |
| Rinnai çƒ­æ°´å™¨ | 1 å° | äº‘ç«¯ GraphQL (aiorinnai) | æ”¯æŒå¾ªç¯æ¨¡å¼ |
| Meross è½¦åº“é—¨ | 2 é—¨ | äº‘ç«¯ MQTT (meross-iot) | æ— ä¼ æ„Ÿå™¨ï¼Œä»…è§¦å‘æ§åˆ¶ |

---

## äºŒã€åŠŸèƒ½éœ€æ±‚

### 2.1 Tab 1: Controlï¼ˆè®¾å¤‡æ§åˆ¶ï¼‰

#### 2.1.1 ç•Œé¢è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Control]  [Schedule]  [History]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ’¡ ç¯å…‰                                                 â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Baby Room     [====â—===========] äº®åº¦: 128  [å¼€å…³]     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”Œ å¼€å…³                                                 â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Coffee        [â— ON]     [åˆ‡æ¢]                        â”‚â”‚
â”‚  â”‚  Veggie        [â— ON]     [åˆ‡æ¢]                        â”‚â”‚
â”‚  â”‚  Tree          [â—‹ OFF]    [åˆ‡æ¢]                        â”‚â”‚
â”‚  â”‚  Bedroom       [â—‹ OFF]    [åˆ‡æ¢]                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸš¿ çƒ­æ°´å™¨                                               â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Main House   æ¸©åº¦: 125Â°F  çŠ¶æ€: â— åœ¨çº¿                  â”‚â”‚
â”‚  â”‚                è¿›æ°´: 103Â°F  å‡ºæ°´: 121Â°F                  â”‚â”‚
â”‚  â”‚                [è§¦å‘5åˆ†é’Ÿå¾ªç¯]                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸš— è½¦åº“é—¨                                               â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Garage Door 1     [è§¦å‘å¼€å…³]                            â”‚â”‚
â”‚  â”‚  Garage Door 2     [è§¦å‘å¼€å…³]                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.1.2 åŠŸèƒ½è§„æ ¼

**Hue (Baby Room)**
| æ“ä½œ | è¡Œä¸º |
|-----|------|
| æ˜¾ç¤º | å½“å‰çŠ¶æ€ (ON/OFF) + äº®åº¦ (0-254) |
| ç‚¹å‡»å¼€å…³ | Flip: ONâ†’OFF æˆ– OFFâ†’ON (äº®åº¦ä¿æŒ) |

**Wemo (4ä¸ªå¼€å…³)**
| æ“ä½œ | è¡Œä¸º |
|-----|------|
| æ˜¾ç¤º | å½“å‰çŠ¶æ€ (ON/OFF) |
| ç‚¹å‡»åˆ‡æ¢ | Flip: ONâ†’OFF æˆ– OFFâ†’ON |

**Rinnai çƒ­æ°´å™¨**
| æ“ä½œ | è¡Œä¸º |
|-----|------|
| æ˜¾ç¤º | è®¾å®šæ¸©åº¦ã€è¿›æ°´æ¸©åº¦ã€å‡ºæ°´æ¸©åº¦ã€åœ¨çº¿çŠ¶æ€ |
| ç‚¹å‡»è§¦å‘ | å¯åŠ¨ 5 åˆ†é’Ÿå¾ªç¯æ¨¡å¼ |

**Meross è½¦åº“é—¨**
| æ“ä½œ | è¡Œä¸º |
|-----|------|
| æ˜¾ç¤º | ä»…åç§°ï¼Œæ— çŠ¶æ€ï¼ˆä¼ æ„Ÿå™¨æœªå®‰è£…ï¼‰ |
| ç‚¹å‡»è§¦å‘ | Toggle: å‘é€å¼€å…³ä¿¡å· |

---

### 2.2 Tab 2: Scheduleï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

#### 2.2.1 ç•Œé¢è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Control]  [Schedule]  [History]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ’¡ Hue å®šæ—¶ä»»åŠ¡                                         â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  æ¯å¤© 20:00   å¼€ç¯ (äº®åº¦ 128)                            â”‚â”‚
â”‚  â”‚  æ¯å¤© 08:20   å…³ç¯                                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”Œ Wemo å®šæ—¶ä»»åŠ¡                                        â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Coffee  æ¯å¤© 07:45   å¼€å¯                               â”‚â”‚
â”‚  â”‚  Coffee  æ¯å¤© 11:00   å…³é—­                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸš¿ çƒ­æ°´å™¨å®šæ—¶ä»»åŠ¡ (æ¥è‡ªè®¾å¤‡)                             â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  MorningShower   07:30-08:15   æ¯å¤©                      â”‚â”‚
â”‚  â”‚  AfternoonPeak   16:30-18:00   æ¯å¤©                      â”‚â”‚
â”‚  â”‚  NightShower     20:30-23:00   æ¯å¤©                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.2 åŠŸèƒ½è§„æ ¼

**åç«¯æ–°å¢å®šæ—¶ä»»åŠ¡**

| è®¾å¤‡ | æ—¶é—´ (PT) | æ“ä½œ | å®ç° |
|-----|----------|------|------|
| Hue Baby Room | æ¯å¤© 20:00 | å¼€ç¯ï¼Œäº®åº¦è®¾ä¸º 128 | APScheduler |
| Hue Baby Room | æ¯å¤© 08:20 | å…³ç¯ | APScheduler |
| Wemo (ç°æœ‰) | æŒ‰ wemo_config.yaml | å¼€/å…³ | APScheduler (å·²æœ‰) |

**çƒ­æ°´å™¨ Schedule**
- ä» Rinnai API è¯»å–ç°æœ‰ scheduleï¼ˆåªè¯»å±•ç¤ºï¼‰
- ä¸åœ¨åç«¯ç®¡ç†ï¼Œä»…å‰ç«¯å±•ç¤º

---

### 2.3 Tab 3: Historyï¼ˆå†å²æ•°æ®ï¼‰

#### 2.3.1 ç•Œé¢è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Control]  [Schedule]  [History]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ’¡ Baby Room äº®åº¦ (24å°æ—¶)                              â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  [æŠ˜çº¿å›¾: äº®åº¦ vs æ—¶é—´]                                   â”‚â”‚
â”‚  â”‚  å¹³å‡äº®åº¦: 128  æœ€é«˜: 254  æœ€ä½: 0                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”Œ Wemo å¼€å…³çŠ¶æ€ (24å°æ—¶)                               â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  [æ—¶é—´çº¿å›¾: ON/OFF çŠ¶æ€å˜åŒ–]                              â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚  å¼€å¯æ—¶é•¿ç»Ÿè®¡:                                            â”‚â”‚
â”‚  â”‚  Coffee    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8å°æ—¶                                â”‚â”‚
â”‚  â”‚  Veggie    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 14å°æ—¶                         â”‚â”‚
â”‚  â”‚  Tree      â–ˆâ–ˆâ–ˆâ–ˆ 4å°æ—¶                                    â”‚â”‚
â”‚  â”‚  Bedroom   â–ˆâ–ˆ 2å°æ—¶                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸš¿ çƒ­æ°´å™¨æ•°æ® (24å°æ—¶)                                   â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  [æŠ˜çº¿å›¾: è¿›æ°´æ¸©åº¦ vs å‡ºæ°´æ¸©åº¦]                           â”‚â”‚
â”‚  â”‚  [æŠ˜çº¿å›¾: æ°´æµé‡]                                         â”‚â”‚
â”‚  â”‚  [æ—¶é—´çº¿: Circulation çŠ¶æ€]                               â”‚â”‚
â”‚  â”‚                                                          â”‚â”‚
â”‚  â”‚  å¹³å‡å‡ºæ°´æ¸©åº¦: 121Â°F  å¹³å‡è¿›æ°´æ¸©åº¦: 103Â°F                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.2 æ•°æ®é‡‡é›†è§„æ ¼

**é‡‡é›†é¢‘ç‡**: æ¯ 30 åˆ†é’Ÿ

**é‡‡é›†å†…å®¹**:

| è®¾å¤‡ | å­—æ®µ |
|-----|------|
| Hue | name, is_on, brightness |
| Wemo | name, is_on |
| Rinnai | set_temperature, inlet_temp, outlet_temp, water_flow, is_circulating |

#### 2.3.3 å¯è§†åŒ–è§„æ ¼

**Hue (Baby Room)**
- æŠ˜çº¿å›¾: äº®åº¦ vs æ—¶é—´ (24å°æ—¶)
- ç»Ÿè®¡: å¹³å‡äº®åº¦ã€æœ€é«˜äº®åº¦ã€æœ€ä½äº®åº¦

**Wemo (4ä¸ªå¼€å…³)**
- æ—¶é—´çº¿å›¾: ON/OFF çŠ¶æ€å˜åŒ–
- æŸ±çŠ¶å›¾: å„å¼€å…³å¼€å¯æ—¶é•¿ç»Ÿè®¡

**Rinnai çƒ­æ°´å™¨**
- æŠ˜çº¿å›¾: è¿›æ°´æ¸©åº¦ vs å‡ºæ°´æ¸©åº¦
- æŠ˜çº¿å›¾: æ°´æµé‡å˜åŒ–
- æ—¶é—´çº¿: Circulation è¿è¡ŒçŠ¶æ€
- ç»Ÿè®¡: å¹³å‡æ¸©åº¦

---

## ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆ (RFC)

### 3.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (React + Vite)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Control â”‚  â”‚ Scheduleâ”‚  â”‚ History â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
â”‚       â”‚            â”‚            â”‚                           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                    â”‚                                        â”‚
â”‚                    â”‚ HTTP/SSE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â–¼                                        â”‚
â”‚              FastAPI Backend                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    API Layer                         â”‚   â”‚
â”‚  â”‚  /api/status  /api/control  /api/schedule  /api/historyâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Device Layer                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚ Hue  â”‚  â”‚ Wemo â”‚  â”‚ Rinnai â”‚  â”‚ Meross â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Scheduler (APScheduler)               â”‚   â”‚
â”‚  â”‚  - Hue å®šæ—¶ä»»åŠ¡ (20:00å¼€, 08:20å…³)                   â”‚   â”‚
â”‚  â”‚  - Wemo å®šæ—¶ä»»åŠ¡ (ç°æœ‰)                              â”‚   â”‚
â”‚  â”‚  - çŠ¶æ€é‡‡é›† (æ¯30åˆ†é’Ÿ)                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  SQLite                              â”‚   â”‚
â”‚  â”‚  - device_history (è®¾å¤‡çŠ¶æ€å†å²)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯ | ç†ç”± |
|-----|------|------|
| åç«¯æ¡†æ¶ | FastAPI | å·²æœ‰åŸºç¡€ï¼Œå¼‚æ­¥æ”¯æŒå¥½ |
| å®šæ—¶ä»»åŠ¡ | APScheduler | å·²æœ‰ï¼Œè½»é‡çº§ |
| æ•°æ®åº“ | SQLite | è½»é‡ï¼Œå•æœºéƒ¨ç½²å‹å¥½ |
| å‰ç«¯æ¡†æ¶ | React 18 | ç”Ÿæ€æˆç†Ÿ |
| æ„å»ºå·¥å…· | Vite | å¿«é€Ÿ HMRï¼Œå¼€å‘ä½“éªŒå¥½ |
| UI æ¡†æ¶ | TailwindCSS | å¿«é€Ÿå¼€å‘ï¼Œå“åº”å¼ |
| å›¾è¡¨åº“ | Recharts | React åŸç”Ÿï¼ŒAPI å‹å¥½ |
| çŠ¶æ€ç®¡ç† | Zustand | è½»é‡ï¼Œå¤Ÿç”¨ |
| HTTP å®¢æˆ·ç«¯ | TanStack Query | ç¼“å­˜ã€è‡ªåŠ¨åˆ·æ–° |

### 3.3 å¼€å‘æ¨¡å¼

```bash
# å¼€å‘ç¯å¢ƒ
# åç«¯: FastAPI (ç«¯å£ 8001)
uvicorn main:app --reload --port 8001

# å‰ç«¯: Vite Dev Server (ç«¯å£ 5173)
# Vite ä»£ç† API è¯·æ±‚åˆ°åç«¯
cd frontend && npm run dev
```

### 3.4 ç”Ÿäº§éƒ¨ç½²

```bash
# 1. æ„å»ºå‰ç«¯
cd frontend && npm run build

# 2. FastAPI serve é™æ€æ–‡ä»¶
# main.py æ·»åŠ :
app.mount("/", StaticFiles(directory="frontend/dist", html=True), name="static")

# 3. å¯åŠ¨æœåŠ¡
uvicorn main:app --port 8001
```

---

## å››ã€API è®¾è®¡

### 4.1 ç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|-----|------|------|
| `/api/status` | GET | è·å–æ‰€æœ‰è®¾å¤‡çŠ¶æ€ |
| `/api/hue/{light}/toggle` | POST | åˆ‡æ¢ç¯çŠ¶æ€ |
| `/api/wemo/{device}/toggle` | POST | åˆ‡æ¢å¼€å…³çŠ¶æ€ |
| `/api/rinnai/circulate` | POST | å¯åŠ¨5åˆ†é’Ÿå¾ªç¯ |
| `/api/garage/{door}/toggle` | POST | è§¦å‘è½¦åº“é—¨ |
| `/api/schedules` | GET | è·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ |
| `/api/history` | GET | è·å–å†å²æ•°æ® (æ”¯æŒæ—¶é—´èŒƒå›´) |

### 4.2 iOS Shortcut APIï¼ˆæ‰‹æœºå¿«æ·æ§åˆ¶ï¼‰

ä¸“ä¸º iOS Shortcuts è®¾è®¡çš„ç®€æ´ APIï¼Œæ”¯æŒ GET è¯·æ±‚ã€‚

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|-----|------|------|
| `/api/hue/off` | GET | å…³ç¯ï¼ˆBaby Roomï¼‰ |
| `/api/hue/on` | GET | å¼€ç¯ï¼Œäº®åº¦ 128ï¼ˆBaby Roomï¼‰ |
| `/api/hue/timer/{minutes}` | GET | å¼€ç¯(äº®åº¦1) + Xåˆ†é’Ÿåå…³ç¯ |
| `/api/hue/timer/{minutes}?brightness=10` | GET | å¼€ç¯(æŒ‡å®šäº®åº¦) + Xåˆ†é’Ÿåå…³ç¯ |
| `/api/hue/cancel` | GET | å–æ¶ˆå½“å‰ Timer |
| `/api/hue/status` | GET | è·å–ç¯çŠ¶æ€ |

**Shortcut ç¤ºä¾‹é…ç½®ï¼š**

```
åœºæ™¯1: å…³ç¯
GET http://localhost:8001/api/hue/off

åœºæ™¯2: å¼€ç¯ï¼ˆäº®åº¦128ï¼‰
GET http://localhost:8001/api/hue/on

åœºæ™¯3: å¼€ç¯ï¼ˆäº®åº¦1ï¼‰+ 7åˆ†é’Ÿåå…³ç¯
GET http://localhost:8001/api/hue/timer/7

åœºæ™¯3å˜ä½“: å¼€ç¯ï¼ˆäº®åº¦10ï¼‰+ 7åˆ†é’Ÿåå…³ç¯
GET http://localhost:8001/api/hue/timer/7?brightness=10

å–æ¶ˆ Timer:
GET http://localhost:8001/api/hue/cancel
```

**Timer è¡Œä¸ºï¼š**
- å¦‚æœå·²æœ‰ Timer åœ¨è¿è¡Œï¼Œè‡ªåŠ¨å–æ¶ˆæ—§ Timerï¼Œé‡æ–°å¼€å§‹è®¡æ—¶
- ä¸ä¼šå åŠ å¤šä¸ª Timer

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "status": "success",
  "light": "Baby room",
  "action": "timer",
  "brightness": 1,
  "minutes": 7,
  "turn_off_at": "2026-02-18T12:07:00",
  "timer_reset": true
}
```

### 4.3 Dashboard APIï¼ˆå‰ç«¯ä½¿ç”¨ï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|-----|------|------|
| `/api/status` | GET | è·å–æ‰€æœ‰è®¾å¤‡çŠ¶æ€ |
| `/api/hue/{light}/toggle` | POST | åˆ‡æ¢ç¯çŠ¶æ€ |
| `/api/wemo/{device}/toggle` | POST | åˆ‡æ¢å¼€å…³çŠ¶æ€ |
| `/api/rinnai/circulate` | POST | å¯åŠ¨5åˆ†é’Ÿå¾ªç¯ |
| `/api/garage/{door}/toggle` | POST | è§¦å‘è½¦åº“é—¨ |
| `/api/schedules` | GET | è·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ |
| `/api/history` | GET | è·å–å†å²æ•°æ® (æ”¯æŒæ—¶é—´èŒƒå›´) |

### 4.4 å“åº”æ ¼å¼

**GET /api/status**
```json
{
  "hue": {
    "baby_room": { "is_on": true, "brightness": 128 }
  },
  "wemo": {
    "coffee": { "is_on": true },
    "veggie": { "is_on": true },
    "tree": { "is_on": false },
    "bedroom": { "is_on": false }
  },
  "rinnai": {
    "set_temperature": 125,
    "inlet_temp": 103,
    "outlet_temp": 121,
    "is_online": true
  },
  "garage": {
    "door_1": { "available": true },
    "door_2": { "available": true }
  }
}
```

**GET /api/schedules**
```json
{
  "hue": [
    { "time": "20:00", "action": "on", "brightness": 128, "days": "daily" },
    { "time": "08:20", "action": "off", "days": "daily" }
  ],
  "wemo": [
    { "device": "coffee", "time": "07:45", "action": "on", "days": "daily" },
    { "device": "coffee", "time": "11:00", "action": "off", "days": "daily" }
  ],
  "rinnai": [
    { "name": "MorningShower", "start": "07:30", "end": "08:15", "days": "daily" },
    { "name": "AfternoonPeak", "start": "16:30", "end": "18:00", "days": "daily" },
    { "name": "NightShower", "start": "20:30", "end": "23:00", "days": "daily" }
  ]
}
```

**GET /api/history?hours=24**
```json
{
  "hue": [
    { "timestamp": "2026-02-18T10:00:00", "is_on": true, "brightness": 128 },
    { "timestamp": "2026-02-18T10:30:00", "is_on": true, "brightness": 128 }
  ],
  "wemo": {
    "coffee": [
      { "timestamp": "2026-02-18T10:00:00", "is_on": true },
      { "timestamp": "2026-02-18T10:30:00", "is_on": false }
    ]
  },
  "rinnai": [
    { 
      "timestamp": "2026-02-18T10:00:00", 
      "set_temperature": 125, 
      "inlet_temp": 103, 
      "outlet_temp": 121,
      "water_flow": 26,
      "is_circulating": false
    }
  ]
}
```

---

## äº”ã€æ•°æ®åº“è®¾è®¡

### 5.1 SQLite Schema

```sql
-- è®¾å¤‡çŠ¶æ€å†å²è¡¨
CREATE TABLE device_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    device_type TEXT NOT NULL,      -- 'hue', 'wemo', 'rinnai'
    device_name TEXT NOT NULL,       -- 'baby_room', 'coffee', etc.
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    data JSON NOT NULL               -- JSON å­˜å‚¨è®¾å¤‡ç‰¹å®šæ•°æ®
);

CREATE INDEX idx_device_history_type_name ON device_history(device_type, device_name);
CREATE INDEX idx_device_history_timestamp ON device_history(timestamp);
```

### 5.2 æ•°æ®å­˜å‚¨ç¤ºä¾‹

```sql
-- Hue è®°å½•
INSERT INTO device_history (device_type, device_name, data) 
VALUES ('hue', 'baby_room', '{"is_on": true, "brightness": 128}');

-- Wemo è®°å½•
INSERT INTO device_history (device_type, device_name, data) 
VALUES ('wemo', 'coffee', '{"is_on": true}');

-- Rinnai è®°å½•
INSERT INTO device_history (device_type, device_name, data) 
VALUES ('rinnai', 'main_house', '{"set_temperature": 125, "inlet_temp": 103, "outlet_temp": 121, "water_flow": 26, "is_circulating": false}');
```

---

## å…­ã€æ–‡ä»¶ç»“æ„

```
smart_home/
â”œâ”€â”€ main.py                     # FastAPI ä¸»ç¨‹åº (æ›´æ–°)
â”œâ”€â”€ requirements.txt            # Python ä¾èµ– (æ›´æ–°)
â”œâ”€â”€ wemo_schedule.py            # Wemo å®šæ—¶ä»»åŠ¡ (ç°æœ‰)
â”œâ”€â”€ wemo_config.yaml            # Wemo é…ç½® (ç°æœ‰)
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡
â”‚
â”œâ”€â”€ api/                        # API è·¯ç”± (æ–°å¢)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ status.py               # çŠ¶æ€æŸ¥è¯¢
â”‚   â”œâ”€â”€ control.py              # è®¾å¤‡æ§åˆ¶
â”‚   â”œâ”€â”€ schedule.py             # å®šæ—¶ä»»åŠ¡
â”‚   â””â”€â”€ history.py              # å†å²æ•°æ®
â”‚
â”œâ”€â”€ models/                     # æ•°æ®æ¨¡å‹ (æ–°å¢)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ device.py               # è®¾å¤‡æ¨¡å‹
â”‚   â””â”€â”€ history.py              # å†å²è®°å½•æ¨¡å‹
â”‚
â”œâ”€â”€ services/                   # ä¸šåŠ¡é€»è¾‘ (æ–°å¢)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ hue_service.py          # Hue æœåŠ¡
â”‚   â”œâ”€â”€ wemo_service.py         # Wemo æœåŠ¡
â”‚   â”œâ”€â”€ rinnai_service.py       # Rinnai æœåŠ¡
â”‚   â”œâ”€â”€ meross_service.py       # Meross æœåŠ¡
â”‚   â””â”€â”€ scheduler.py            # å®šæ—¶ä»»åŠ¡ç®¡ç†
â”‚
â”œâ”€â”€ data/                       # æ•°æ®å­˜å‚¨ (æ–°å¢)
â”‚   â””â”€â”€ smart_home.db           # SQLite æ•°æ®åº“
â”‚
â”œâ”€â”€ frontend/                   # React å‰ç«¯ (æ–°å¢)
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.tsx
â”‚       â”œâ”€â”€ App.tsx
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ Layout.tsx
â”‚       â”‚   â”œâ”€â”€ ControlTab.tsx
â”‚       â”‚   â”œâ”€â”€ ScheduleTab.tsx
â”‚       â”‚   â”œâ”€â”€ HistoryTab.tsx
â”‚       â”‚   â”œâ”€â”€ HueCard.tsx
â”‚       â”‚   â”œâ”€â”€ WemoCard.tsx
â”‚       â”‚   â”œâ”€â”€ RinnaiCard.tsx
â”‚       â”‚   â”œâ”€â”€ GarageCard.tsx
â”‚       â”‚   â””â”€â”€ charts/
â”‚       â”‚       â”œâ”€â”€ BrightnessChart.tsx
â”‚       â”‚       â”œâ”€â”€ SwitchTimeline.tsx
â”‚       â”‚       â””â”€â”€ HeaterChart.tsx
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â”œâ”€â”€ useStatus.ts
â”‚       â”‚   â”œâ”€â”€ useSchedules.ts
â”‚       â”‚   â””â”€â”€ useHistory.ts
â”‚       â””â”€â”€ stores/
â”‚           â””â”€â”€ deviceStore.ts
â”‚
â””â”€â”€ docs/
    â””â”€â”€ dev_dashboard.md        # æœ¬æ–‡æ¡£
```

---

## ä¸ƒã€å®æ–½è®¡åˆ’

### Phase 1: åç«¯é‡æ„ (1-2 å¤©)

1. åˆ›å»º `api/` ç›®å½•ï¼Œæ‹†åˆ†è·¯ç”±
2. åˆ›å»º `services/` ç›®å½•ï¼Œå°è£…è®¾å¤‡æ“ä½œ
3. å®ç° SQLite æ•°æ®å­˜å‚¨
4. æ·»åŠ çŠ¶æ€é‡‡é›†å®šæ—¶ä»»åŠ¡ (æ¯30åˆ†é’Ÿ)
5. æ·»åŠ  Hue å®šæ—¶ä»»åŠ¡ (20:00å¼€, 08:20å…³)

### Phase 2: å‰ç«¯å¼€å‘ (2-3 å¤©)

1. åˆå§‹åŒ– React + Vite é¡¹ç›®
2. å®ç° Control Tab (è®¾å¤‡æ§åˆ¶)
3. å®ç° Schedule Tab (å®šæ—¶ä»»åŠ¡å±•ç¤º)
4. å®ç° History Tab (å†å²æ•°æ®å¯è§†åŒ–)

### Phase 3: é›†æˆæµ‹è¯• (1 å¤©)

1. ç«¯åˆ°ç«¯æµ‹è¯•
2. ç”Ÿäº§æ„å»ºæµ‹è¯•
3. éƒ¨ç½²éªŒè¯

---

## å…«ã€æ³¨æ„äº‹é¡¹

### 8.1 Meross è½¦åº“é—¨

- ä¼ æ„Ÿå™¨æœªå®‰è£…ï¼Œæ— æ³•è·å–çœŸå®çŠ¶æ€
- ä»…æä¾›è§¦å‘åŠŸèƒ½ï¼Œä¸æ˜¾ç¤ºå¼€/å…³çŠ¶æ€
- Garage Door 3 æœªæ¥çº¿ï¼Œå‰ç«¯ä»…æ˜¾ç¤º Door 1 å’Œ 2

### 8.2 æ—¶åŒº

- æ‰€æœ‰å®šæ—¶ä»»åŠ¡ä½¿ç”¨ Pacific Time (PT)
- APScheduler é…ç½®æ—¶åŒº: `America/Los_Angeles`

### 8.3 Rinnai Schedule

- Schedule å­˜å‚¨åœ¨ Rinnai äº‘ç«¯ï¼Œä»…è¯»å–å±•ç¤º
- ä¸åœ¨åç«¯åˆ›å»º/ä¿®æ”¹ schedule

### 8.4 æ•°æ®ä¿ç•™

- SQLite å†å²æ•°æ®æš‚ä¸æ¸…ç†
- åç»­å¯æ·»åŠ å®šæœŸæ¸…ç†ç­–ç•¥ (å¦‚ä¿ç•™ 30 å¤©)
